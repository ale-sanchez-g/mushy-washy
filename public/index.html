<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mushy Washy - Game Collection</title>
    <link rel="icon" type="image/jpeg" href="assets/blueMushroom.jpeg">
    <link rel="stylesheet" href="assets/style.css">
    <script type="module">
        import { getUserContext } from './modules/contextGenerator.js';
        getUserContext();
    </script>
</head>
<body>
    <header>
        <h1>Welcome to Mushy Washy</h1>
    </header>
    <main>
        <!-- Introduction section -->
        <div class="center">
            <img src="assets/blueMushroom.jpeg" alt="Blue Mushroom artwork for Mushy Washy games">
        </div>
        
        <section>
            <p>
                <strong>Mushy Washy</strong>, where you learn Site Reliability Engineering (SRE) 
                concepts through fun, interactive games! SRE is about keeping systems running smoothly and 
                knowing when it's okay to take risks. Whether you're new to SRE or want to sharpen your skills, 
                our games make learning engaging and practical.
            </p>
        </section>

        <!-- Mushroom Game Section -->
        <h2>üçÑ Mushroom Collection Game</h2>
        <section>
            <p>Test your precision and timing! Collect mushrooms in your basket while managing its weight. 
            This game teaches you about <strong>resource management</strong> a key concept in SRE where you balance 
            system capacity and demand.</p>
            <p><strong>How to play:</strong> Press and hold the up key to move your basket and collect mushrooms. 
            The more mushrooms you collect, the heavier your basket becomes!</p>
            <div class="center">
                <div class="button-card" role="button" tabindex="0" onclick="window.location.href = 'mushroom-game';" onkeypress="if(event.key==='Enter'||event.key===' ') window.location.href = 'mushroom-game';">
                    <h3>Play Mushroom Game</h3>
                    <p>Test your skills!</p>
                </div>
            </div>
        </section>

        <!-- Snake Game Section -->
        <h2>üêç Snake Game</h2>
        <section>
            <p>Guide your snake to eat food and grow as long as possible! This game teaches you about 
            <strong>capacity planning</strong> ‚Äî a core SRE concept where you anticipate growth and manage 
            resources before they run out.</p>
            <p><strong>How to play:</strong> Use the arrow keys to steer the snake. Eat food to grow longer 
            and increase your score, but don't run into the walls!</p>
            <div class="center">
                <div class="button-card" role="button" tabindex="0" onclick="window.location.href = 'snake-game';" onkeypress="if(event.key==='Enter'||event.key===' ') window.location.href = 'snake-game';">
                    <h3>Play Snake Game</h3>
                    <p>Grow as big as possible!</p>
                </div>
            </div>
        </section>

        <!-- Barista Game Section -->
        <h2>‚òï Barista Game: Error Budgeting</h2>
        <section>
            <p>Run a coffee shop and learn about <strong>error budgeting</strong> one of the most important 
            SRE concepts. Your error budget is the acceptable amount of downtime or mistakes you can make before 
            impacting your business. Make smart decisions to keep your customers happy while building new features!</p>
            <div class="center">
                <div class="button-card" role="button" tabindex="0" onclick="window.location.href = 'barista';" onkeypress="if(event.key==='Enter'||event.key===' ') window.location.href = 'barista';">
                    <h3>Play Barista Game</h3>
                    <p>Learn error budgeting!</p>
                </div>
            </div>
        </section>
    </main>
</body>
<script>
  (function () {
    var webSdkScript = document.createElement("script");

    // fetch the latest 2.x.x version of the Web-SDK from the CDN
    webSdkScript.src =
      "https://unpkg.com/@grafana/faro-web-sdk@2/dist/bundle/faro-web-sdk.iife.js";

    webSdkScript.onload = () => {
      try {
        window.GrafanaFaroWebSdk.initializeFaro({
          url: "https://faro-collector-prod-au-southeast-1.grafana.net/collect/37b949c0be48aaa3ff2d8a64faa3d567",
          app: {
            name: "mushy-washy",
            version: "1.0.1",
            environment: "production",
          },
          sessionTracking: {
          samplingRate: 1,
          persistent: true
        },
        });
      } catch (error) {
        console.warn('Grafana Faro initialization failed (CORS):', error.message);
        return; // Skip tracing instrumentation if Faro fails
      }


      // Load instrumentations at the onLoad event of the web-SDK and after the above configuration.
      // This is important because we need to ensure that the Web-SDK has been loaded and initialized before we add further instruments!
      var webTracingScript = document.createElement("script");

      // fetch the latest 2.x.x version of the Web Tracing package from the CDN
      webTracingScript.src =
        "https://unpkg.com/@grafana/faro-web-tracing@2/dist/bundle/faro-web-tracing.iife.js";

      // Initialize, configure (if necessary) and add the the new instrumentation to the already loaded and configured Web-SDK.
      webTracingScript.onload = () => {
        try {
          window.GrafanaFaroWebSdk.faro.instrumentations.add(
            new window.GrafanaFaroWebTracing.TracingInstrumentation()
          );
        } catch (error) {
          console.warn('Grafana Faro tracing failed:', error.message);
        }
      };

      // Append the Web Tracing script script tag to the HTML page
      document.head.appendChild(webTracingScript);
    };

    // Append the Web-SDK script script tag to the HTML page
    document.head.appendChild(webSdkScript);
  })();
</script>

</html>